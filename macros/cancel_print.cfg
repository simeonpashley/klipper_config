
[gcode_macro CANCEL_PRINT]
description: Cancel the actual running print
rename_existing: CANCEL_PRINT_BASE
variable_park: True
gcode:
	M400								; wait for buffer to clear
    ## Move head and retract only if not already in the pause state and park set to true
    {% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
        _TOOLHEAD_PARK_PAUSE_CANCEL
    {% endif %}
    TURN_OFF_HEATERS					; turn off heaters
    CANCEL_PRINT_BASE
    SDCARD_RESET_FILE
    # Raise nozzle by 60mm
    G91
    G1 Z60 F3000
    G90
    # Disable steppers
    M84
    SAVE_IF_SET                         ; save config
